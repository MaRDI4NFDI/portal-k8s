image:
  repository: ghcr.io/mardi4nfdi/redis-jobrunner-production
  tag: latest
  pullPolicy: Always

configMap:
  name: jobrunner-config

mediawiki:
  db_server: mariadb
  db_name: my_wiki
  db_user: sqluser
  scheme: https

elasticsearch:
  host: elasticsearch
  port: 9200

resources:
  jobrunner:
    requests:
      cpu: 500m
      memory: 64Mi
    limits:
      cpu: 1000m
      memory: 128Mi
  rescheduler:
    requests:
      cpu: 500m
      memory: 64Mi
    limits:
      cpu: 1000m
      memory: 128Mi

redis:
  host: "redis-master"
  port: 6379

runners:
  basic: 2
  dispChanges: 2
  profiles: 2
  cirrusSearch: 0

memory:
  default: "400M"
  cirrusSearchElasticaWrite: "600M"
  cirrusSearchMassIndex: "600M"

services:
  jobrunner:
    replicas: 1
    args:
      - php
      - /jobrunner/redisJobRunnerService
      - "--config-file=/jobrunner/config.json"
  rescheduler:
    replicas: 1
    args:
      - php
      - /jobrunner/redisJobChronService
      - "--config-file=/jobrunner/config.json"

secrets:
  mariadb: mariadb-secrets
  wikibase: wikibase-env-secrets
