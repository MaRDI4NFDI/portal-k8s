apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: jobrunner
spec:
  chart:
    spec:
      version: "0.1.17"
  values:
    image:
      repository: ghcr.io/mardi4nfdi/redis-jobrunner-production
      tag: 1.44.26
    runners:
      basic: 8
      dispChanges: 32
      profiles: 4
      cirrusSearch: 4
    memory:
      cirrusSearchElasticaWrite: "800M"
      cirrusSearchMassIndex: "600M"
    mediawiki:
      db_server: mariadb-primary:3306
    resources:
      jobrunner:
        requests:
          cpu: 4000m
          memory: 8Gi
        limits:
          cpu: 8000m
          memory: 16Gi
      rescheduler:
        requests:
          cpu: 200m
          memory: 512Mi
        limits:
          cpu: 1000m
          memory: 2Gi
